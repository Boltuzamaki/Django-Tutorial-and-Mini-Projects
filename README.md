# Django-Tutorial-and-Mini-Projects

## Installation
```sh
pip install django
```
Then open the anaconda terminal and first type
```sh
django-admin startproject firstsite
```
This will automatically create a project named as **firstsite**. Wich create some files automatically which will be used furter.
```sh
django-admin startproject firstsite
```

### **What Is __init__.py?**
- This file is generated by Django for us. It is mandatory to have an __inti__.py file in a directory to denote that the project is a python package and can be imported into other files. This file usually remains empty.
- If this file gets missing, you will see “package not found error” in the absence of this file.
### **What Is settings.py?**
- This is the core file of our Django projects.
- It contains the configuration values which are needed by web apps to work properly such as database settings, static files location, template location, etc. We will keep coming to this file to edit the project configuration throughout this course.
### **What is urls.py?**
- Url declaration and mapping are made under this file.
### **What is wsgi.py?**
- WSGI stands for web-server gateway interface.
- WSGI is a specification that describes the communication between a web server and a web application.
### **What is manage.py?**
- Command-line utility for performing administrative tasks.
- We will be using manage.py frequently while developing a Django project.

In project folder run
```sh
python manage.py runserver
```
To start server . First server is started running successfully :)

### How Websites works
#### **Front-End:**
- It is a combination of HTML, CSS, and Javascript.

- Users can directly view and interact with this data.

- It is also referred to as client-side or frontend design.

#### **Back-end:**
- Back-end takes care of when and which webpage should be visible to the client corresponding to a given request.

- Users can not directly view or interact with this data. The back-end is all about the behind-the-scene activities.

- It is also referred to as the server-side.

## Creating first page and building urls.py

Create a views.py file in project folder which contains urls.py
#### In urls.py
```sh
from . import views
```
```sh
urlpatterns = [

    path('admin/', admin.site.urls),

    path('', views.index, name='index'),

    path('about/', views.about, name='about'), # this is how new path of function in views.py is added to base url
]
```
```sh
from django.http import HttpResponse

def index(request):
    return HttpResponse('''Welcome to first route made in django''')

def about(request):
    return HttpResponse("But wait this is the second one")    # HttpResponse wrap text in html
```    
http://127.0.0.1:8000/about/
This will show you a page which gives an output which present in http response of about.

## Django Templates

#### Updating settings.py file
We have to specify in seerings.py that there is a template folder in which we are putting the templates.Like this
```sh
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': ["templates"],
        'APP_DIRS': True,
        'OPTIONS': {
            # ... some options here ...
        },
    },
]
```
All the html files can go in a newly created folder named templates.To access this we have to make changes in views.py
```sh
from django.shortcuts import render

def index(request):
    return render(request, 'index.html')
```

## Creating an App and Add App.
```sh
python manage.py startapp appname
```
- Create a urls.py inside app to map its views.py things
```sh
from django.conf.urls import url
from . import views

urlpatters = [
url(r'^$', views.description_page),
]
```

- And create views.py inside app
```sh
from django.shortcuts import render

# Create your views here.

def description_page(request):
	return render(request, 'desc_page/description_page.html')
```
- Add that app in settings.py add 'desc_page' like this
```sh
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'desc_page',
]
```
- Now join the urls.py of created app to mainm project urls.py
```sh
from django.contrib import admin
from django.urls import path,include
from django.conf.urls import url

urlpatterns = [
    path('admin/', admin.site.urls),
    url('', include('desc_page.urls')),
]
```
## Creating model and create Admin superuser

```sh
from django.db import models


class Anime(models.Model):
	ALL_SEASONS = [
	("WINTER", 'Winter'),
	("SPRING", 'Spring'),
	("FALL", 'Fall'),
	("END", 'End'),
	]

	SHOW_STATUS = [
	("RUNNING", 'Running'),    
	("COMPLETED", 'Completed'),
	]

	anime_name = models.CharField(max_length=50)
	anime_rank = models.IntegerField(default=0)
	anime_rating = models.DecimalField(default = 0.0 , max_digits=2, decimal_places=2)
	anime_thumbnail = models.ImageField(upload_to='images/')  
	anime_popularity = models.IntegerField(default=0)
	total_members = models.IntegerField(default=0)
	synopsis = models.CharField(max_length=200)
	start_season = models.CharField(
        max_length=9,
        choices=ALL_SEASONS,
        default="WINTER",
        )
	start_year = models.IntegerField(default=0)
	total_episodes = models.IntegerField(default=0)
	status = models.CharField(
        max_length=9,
        choices=SHOW_STATUS,
        default="RUNNING",
    )
    def __str__(self):
         return self.anime_name
```

- Register app.py in settings
```sh
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'desc_page.apps.DescPageConfig',
    
]
```
- Now makemigrations and migrate

```sh
python manage.py makemigrations app_name
python manage.py migrate
```

- Creating superuser
```sh
python manage.py createsuperuser
```
username - animereco
password - recoanime

- Register Model to admin.py for its access in admin url
```sh
from django.contrib import admin
from .models import Question

admin.site.register(Question)
```

## Add data from csv to database

```sh
tmp_data=pd.read_csv('C://Users//boltuzamaki//Desktop//animereco//aniReco//general//databse_add.csv')
try:
    anime = [
               Anime(
	    		anime_id = tmp_data.iloc[row]['anime_id'] ,
	    		anime_name = tmp_data.iloc[row]['title'] ,
	    		anime_synonyms = tmp_data.iloc[row]['title_synonyms'], 
	    		anime_type = tmp_data.iloc[row]['type'] ,
	    		anime_rank = tmp_data.iloc[row]['rank'] ,
	    		anime_score = tmp_data.iloc[row]['score'], 
	    		anime_rating = tmp_data.iloc[row]['rating'], 
			anime_thumbnail = tmp_data.iloc[row]['image_url'], 
			anime_popularity = tmp_data.iloc[row]['popularity'], 
			total_members = tmp_data.iloc[row]['members'] ,
			genre = tmp_data.iloc[row]['genre'] ,
			total_episodes = tmp_data.iloc[row]['episodes'], 
			duration_min = tmp_data.iloc[row]['duration_min'],
			studio = tmp_data.iloc[row]['studio'] ,
			anime_premiered = tmp_data.iloc[row]['premiered'],
			status = tmp_data.iloc[row]['status'] 
			)
	for row in range(0, len(tmp_data))
	]
except:
	print("lol")
Anime.objects.bulk_create(anime)
```

## Pagination

modify function un views.py like 

```sh 

def top_anime(request):

    anime_list = Anime.objects.order_by('anime_rank')
    page = request.GET.get('page', 1)
    paginator = Paginator(anime_list, 5)
    try:
        anime_dict = paginator.page(page)
    except PageNotAnInteger:
    	anime_dict = paginator.page(1)
    except EmptyPage:
    	anime_dict = paginator.page(paginator.num_pages)

    return render(request, 'general/top_anime.html',{ 'categories':anime_dict })
 ```
 
 #### Paginator logic in html for many pages
 ```sh
   	{% if categories.has_other_pages %}
	  	<ul class="pagination">
	  		{% if categories.has_previous %}
	  			<a href="?page={{ categories.previous_page_number }}">&laquo;</a></li>
	  		{% else %}
	  			<li class="disabled"><span>&laquo;</span></li>
	  		{% endif %}
	  		{% for i in categories.paginator.page_range %}
	  			{% if categories.number > 3 and forloop.first %}
			  		<li><a href="?page=1">1</a></li>
			  		<li class="disabled">⋯</li>
				 {% endif %}
				{% if categories.number == i %}
					<li class="active"><span>{{ i }} <span class="sr-only">(current)</span></li>
				{% elif i > categories.number|add:'-3' and i < categories.number|add:'3' %}
					<li><a href="?page={{ i }}">{{ i }}</a></li>
				{% endif %}
				{% if categories.paginator.num_pages > categories.number|add:'3' and forloop.last %}
					<li>⋯</li>
					<li><a href="?page={{ categories.paginator.num_pages }}">{{ categories.paginator.num_pages }}</a></li>
				{% endif %}
			{% endfor %}
			{% if categories.has_next %}
				<li><a href="?page={{ users.next_page_number }}">&raquo;</a></li>
			{% else %}
				<li class="disabled">»</li>
			{% endif %}
		</ul>
	{% endif %}
```


## Create alphabet separated page and Query seperated page views.py and html

```sh
def pages(request, anime_alphabet):
	anime_list = [Anime.objects.filter(anime_name__istartswith=i) for i in "ABCDEFGHIJKLMNOPQRSTUVWXYZ"]
	alphabets_string = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'
	index = alphabets_string.find(str(anime_alphabet))
	page = request.GET.get('page', 1)
	paginator = Paginator(anime_list[index], 18)
	try:
		anime_dict = paginator.page(page)
	except PageNotAnInteger:
		anime_dict = paginator.page(1)
	except EmptyPage:
		anime_dict = paginator.page(paginator.num_pages)
	return render(request, 'general/home.html',{ 'categories':anime_dict })



def genre(request):
	genrename = ["Comedy","Supernatural","Romance","Shounen","Parody","School","Magic","Shoujo","Drama",  \
    "Fantasy","Kids","Action","Music","SliceofLife","Josei","Harem","ShounenAi","Adventure","SuperPower","Sci-Fi",   \
    "Ecchi","Seinen","MartialArts","Game","Sports","Demons","Historical","Horror","Mystery","Psychological",      \
    "Vampire","Mecha","Military","Space","Samurai","Thriller","Hentai","Yaoi","ShoujoAi","Police","Cars",       \
    "Dementia","Yuri"]
	lists = []
	for gen in genrename:
		if request.GET.get(str(gen), 'off') == "on":
			lists.append(gen)
	context = { 'genrename':genrename }

	try:
		anime_dict = Anime.objects.filter(genre__in=lists)
		#print(lists)
		#print(anime_dict)
		page = request.GET.get('page', 1)
		paginator = Paginator(anime_dict, 18)
		try:
			anime_dict = paginator.page(page)
		except PageNotAnInteger:
			anime_dict = paginator.page(1)
		except EmptyPage:
			anime_dict = paginator.page(paginator.num_pages)
		context = { 'genrename':genrename ,'categories':anime_dict }


        
	except:
		pass		



	return render(request, 'general/genre.html', context)
```

#### Html Alphabets sort

```sh
{% extends 'general/base.html' %}
{% block title %}Home{% endblock %}
{% block body %}
<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 class="text-center">Welcome to aniReco</h3><br><br>
        </div>
    </div>
<div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Filters
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    <li><a href="/genre">Genre</a></li>
    <li><a href="#">Running Status</a></li>
    <li><a href="#">Blah</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="#">Blah</a></li>
  </ul>
</div>

    <div class="row text-center">
    <ul class="list-inline">
        <li class="first-char">
       		<a href="s" rel="all" class="active">All</a>
        </li>
        <li class="first-char">
       		<a href="/list-0" rel="0" class="">#</a>
        </li>
    	   <li class="first-char">
       		<a href="/general/A" rel="" class="">A</a>
        </li>
        <li class="first-char">
       		<a href="/general/B" rel="" class="">B</a>
        </li>
        <li class="first-char">
       		<a href="/general/C" rel="" class="">C</a>
        </li>
        <li class="first-char">
       		<a href="/general/D" rel="" class="">D</a>
        </li>
        <li class="first-char">
       		<a href="/general/E" rel="" class="">E</a>
        </li>
        <li class="first-char">
       		<a href="/general/F" rel="" class="">F</a>
        </li>
        <li class="first-char">
       		<a href="/general/G" rel="" class="">G</a>
        </li>
        <li class="first-char">
       		<a href="/general/H" rel="" class="">H</a>
        </li>
        <li class="first-char">
       		<a href="/general/I" rel="" class="">I</a>
        </li>
        <li class="first-char">
       		<a href="/general/J" rel="" class="">J</a>
        </li>
        <li class="first-char">
       		<a href="/general/K" rel="" class="">K</a>
        </li>
        <li class="first-char">
       		<a href="/general/L" rel="" class="">L</a>
        </li>
        <li class="first-char">
       		<a href="/general/M" rel="" class="">M</a>
        </li>
        <li class="first-char">
       		<a href="/general/N" rel="" class="">N</a>
        </li>
        <li class="first-char">
       		<a href="/general/O" rel="" class="">O</a>
        </li>
        <li class="first-char">
       		<a href="/general/P" rel="" class="">P</a>
        </li>
        <li class="first-char">
       		<a href="/general/Q" rel="" class="">Q</a>
        </li>
        <li class="first-char">
       		<a href="/general/R" rel="" class="">R</a>
        </li>
        <li class="first-char">
       		<a href="/general/S" rel="" class="">S</a>
        </li>
        <li class="first-char">
       		<a href="/general/T" rel="" class="">T</a>
        </li>
        <li class="first-char">
       		<a href="/general/U" rel="" class="">U</a>
        </li>
        <li class="first-char">
       		<a href="/general/V" rel="" class="">V</a>
        </li>
        <li class="first-char">
       		<a href="/general/W" rel="" class="">W</a>
        </li>
        <li class="first-char">
       		<a href="/general/X" rel="" class="">X</a>
        </li>
        <li class="first-char">
       		<a href="/general/Y" rel="" class="">Y</a>
        </li>
        <li class="first-char">
       		<a href="/general/Z" rel="" class="">Z</a>
        </li>
     </ul>
    </div>

{% if categories %}
{% for category in categories %}
    <div class="col-sm-4 col-lg-2">
    	<div class="thumbnail text-center">
            <img src="{{ category.anime_thumbnail }}" alt="anime pic" class="ing-responsive" style="width:100px;height:150px;object-fit:scale-down;">
            <div class="caption" style="height:80px">
            <h8>{{ category.anime_id }}</h8>
            <h6>{{ category.anime_name }}</h6>
            </div>                
        </div>
    </div>
{% endfor %}
{% endif %}
</div>
<div class="row text-center">
{% if categories.has_other_pages %}
  	<ul class="pagination">
  		{% if categories.has_previous %}
  			<a href="?page={{ categories.previous_page_number }}">&laquo;</a></li>
  		{% else %}
  			<li class="disabled"><span>&laquo;</span></li>
  		{% endif %}
  		{% for i in categories.paginator.page_range %}
  			{% if categories.number > 3 and forloop.first %}
		  		<li><a href="?page=1">1</a></li>
		  		<li class="disabled">⋯</li>
			 {% endif %}
			{% if categories.number == i %}
				<li class="active"><span>{{ i }} <span class="sr-only">(current)</span></li>
			{% elif i > categories.number|add:'-3' and i < categories.number|add:'3' %}
				<li><a href="?page={{ i }}">{{ i }}</a></li>
			{% endif %}
			{% if categories.paginator.num_pages > categories.number|add:'3' and forloop.last %}
				<li>⋯</li>
				<li><a href="?page={{ categories.paginator.num_pages }}">{{ categories.paginator.num_pages }}</a></li>
			{% endif %}
		{% endfor %}
		{% if categories.has_next %}
			<li><a href="?page={{ users.next_page_number }}">&raquo;</a></li>
		{% else %}
			<li class="disabled">»</li>
		{% endif %}
	</ul>
{% endif %}
</div>

{% endblock %}
```

#### Html query seperated
```sh
{% extends 'general/base.html' %}
{% block title %}Home{% endblock %}
{% block body %}


<div class="container-fluid">
    <div class="row">
        <div class="col-sm-12">
            <h3 class="text-center">Welcome to aniReco</h3><br><br>
        </div>
    </div>
<div class="dropdown">
  <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
    Filters
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
    
    <li><a href="/general/genre">Genre</a></li>
    <li><a href="#">Running Status</a></li>
    <li><a href="#">Blah</a></li>
    <li role="separator" class="divider"></li>
    <li><a href="#">Blah</a></li>
  </ul>
</div>
<div class="row text-center">
<form action='#' method='get'>
  
    {% for name in genrename %}
    <label class="checkbox-inline">
    <input type="checkbox" name="{{ name }}">{{ name }}<br>
  </label>
    {% endfor %}

    <br>
    <button type='submit'> Submit</button>
   
</form>

{% if categories %}
{% for category in categories %}
    <div class="col-sm-4 col-lg-2">
      <div class="thumbnail text-center">
            <img src="{{ category.anime_thumbnail }}" alt="anime pic" class="ing-responsive" style="width:100px;height:150px;object-fit:scale-down;">
            <div class="caption" style="height:80px">
            <h8>{{ category.anime_id }}</h8>
            <h6>{{ category.anime_name }}</h6>
            </div>                
        </div>
    </div>
{% endfor %}
{% endif %}
    
    {% if categories.has_other_pages %}
      <ul class="pagination">
        {% if categories.has_previous %}
          <a href="?page={{ categories.previous_page_number }}">&laquo;</a></li>
        {% else %}
          <li class="disabled"><span>&laquo;</span></li>
        {% endif %}
        {% for i in categories.paginator.page_range %}
          {% if categories.number > 3 and forloop.first %}
            <li><a href="?page=1">1</a></li>
            <li class="disabled">⋯</li>
         {% endif %}
        {% if categories.number == i %}
          <li class="active"><span>{{ i }} <span class="sr-only">(current)</span></li>
        {% elif i > categories.number|add:'-3' and i < categories.number|add:'3' %}
          <li><a href="?page={{ i }}">{{ i }}</a></li>
        {% endif %}
        {% if categories.paginator.num_pages > categories.number|add:'3' and forloop.last %}
          <li>⋯</li>
          <li><a href="?page={{ categories.paginator.num_pages }}">{{ categories.paginator.num_pages }}</a></li>
        {% endif %}
      {% endfor %}
      {% if categories.has_next %}
        <li><a href="?page={{ users.next_page_number }}">&raquo;</a></li>
      {% else %}
        <li class="disabled">»</li>
      {% endif %}
    </ul>
  {% endif %}
</div>

{% endblock %}
```
